# SeriousCompany Site Core

Ядро для быстрой и удобной разработки сайта.

Сайт был разработан на nginx, php7.4, mysql  
Настройки ядра на nginx находятся в файле `nginx-config`

Рекомендуется пересылать все запросы на index.php  
За исключением тех запросов, в которых вызываются файлы шаблона или другие файлы.

Внимание! Для корректной установки сайта необходимо, чтобы сайту была доступна  
для записи корневая директория сайта.  
При установке он создаст некоторые конфигурации в папке `configs`.

Для установки сайта просто закиньте содержимое src в корень сайта и через браузер вызовите index.php.  
Далее вам покажется мастер установки.

Полная документация по использованию ядра, а также описание его кода указана в documentation.html.  
В данном репозитории содержится лишь ядро. Документацию модулей, смотрите в репозиториях конкретного модуля.


# Главная цель ядра

Ядро основано на модулях. Каждый модуль отвечает за определенный функционал.  
Возможно, чтобы один модуль использовал функционал другого.  
Вы можете заменить стандартные модули (те, которые предустановлены)  
на свои и подстроить структуру сайта под себя.  
Единственное, что контролируется вне модулей, это вызов страницы.  
Если модуль зависит от другого, то необходимо это указать в соответствующем  
методе в индексе, чтобы сначало подгрузился модуль, от которого зависит текущий.  
Необходимый модуль подгрузится лишь тогда, когда вы явно укажете, что хотите работать с модулем.  
За подгрузку модуля и получение его индекса отвечает метод `/modules/Module::load("MODULE_NAME")`


# Что удобного в модульной системе?

Вы разрабатываете модуль всего один раз, а далее используете его в остальных своих проектах.  
Для каждого проекта вы вставляете модуль, необходимый для конкретного проекта.  
Модуль не подгружается до того, пока вы сами его не вызовите.  
Таким образом в момент вызова страницы будет подгружено лишь необходимое.

# Создание страницы

В ядре присутствует система управления страницами, в которой вы можете создать новую.  
После установки ядра (чистого) вам будет показана системная страница по управлению собой и другими страницами.  
При желании вы можете заменить стандартную страницу как это делает модуль templates.  
При создании страницы вы укажете обработчик страницы, который должен быть унаследован от `\PathExecutor`.  
У вас будут методы по получению заголовка страницы, проверки страницы, а также сам метод вызова обработки страницы.  
Также вам будет передана переменна пути страницы, чтобы вы могли обработать местонахождение страницы.  
И в нем вы уже можете подгрузить необходимые вам  модули, через `\modules\Module::load($module)`  
Эта функция инициализирует модуль единожды, а дальше сохраняет объект индекса модуля.  
При повторном вызове этой функции с такимже модулем она возвратит сохраненный ранее объект.  
Тоесть можно без опасения лишних действий вызывать функцию несколько раз.  
Функция передаст вам объект индекса модуля. Далее все зависит от функционала модуля.  
Например путь `templates/handlers.news.list`.  
Разделитель `/` отвечает как обычный разделитель директории.  
Разделитель `.` это разделитель директории, а также это указывает, что эта директория является пространства имен класса.


# Класс базы данных

Вы можете получить объект для работы с базой данных простым вызовом `\database::getInstance()`.  
Объект также сохранятся, так что можно без опасок вызывать функцию сколько угодно.


# Локализация

Ядро поддерживает локализацию.  
Для этого в конфиге нужно указать массив `locales` с возможными локализациями.  
Указывается псевданим, с помощью которого будет вызываться та или иная локализация.  
например `/en/about` `/ru/about`. Путь без префикса локализации будет указывать на локализацию по умолчанию.  
Она задается также в конфиге строкой `locale_default`.  
Сама локализация не обрабатывается ядром.  
Когда ядро обнаружило локализацию, она будет указана в константе `LOCALE`  
А также будет константа `LOCALE_PREFIX` это префикс локализации к URL.  
Для упрощения создания URL на ту или иную страницу.


# Смена изначальной структуры ядра

Изначально ядро знает о 4 директориях, с которыми он работает.  
Все эти пути меняются в `index.php`.  
Обязателен слэш на конце.  
Все директории, кроме `root` должны указываться относительно корня сайта.
- `root` - Корневая директория сайта
- `instruments` - Директория, хранящая все инструменты и модули
- `configs` - Директория, хранящия настройки сайта
- `content` - Директория, загружаемого контента пользователей сайта. Например аватарки или картинки новостей.